:root{
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* Push content past iOS status bar / Dynamic Island */
.container{
  /* Base had: padding: 10px 12px 32px; keep sides the same, bump top safely, and keep bottom modest for static footer */
  padding-top: max(16px, calc(var(--safe-top) + 14px));
  padding-right: 12px;
  padding-left: 12px;
  padding-bottom: max(32px, calc(32px + var(--safe-bottom)));
}

/* Tabs sit right under the safe area */
.tabs{ margin-top: 4px; }

/* Footer: base UI uses a static footer. Respect safe-bottom padding, no positioning tweaks needed. */
.app-footer{
  padding-bottom: calc(var(--safe-bottom) + 8px) !important;
}

/* If you want a fixed footer instead, uncomment this block and increase container bottom padding above.
.app-footer{
  position: fixed !important;
  left: 0; right: 0; bottom: 0;
  z-index: 20;
}
.container{
  padding-bottom: max(90px, calc(90px + var(--safe-bottom))) !important;
}
*/

/* Dialogs align nicely without colliding with top inset */
.modal{ margin-top: max(10px, calc(var(--safe-top) + 6px)); }
.loading-screen{
  background:
    radial-gradient(80vmax 80vmax at 50% 50%, rgba(255,255,255,0.50), rgba(255,255,255,0.70)),
    radial-gradient(80vmax 80vmax at 50% 50%, rgba(13,10,20,0.08), rgba(13,10,20,0.16));
}
@media (prefers-color-scheme: dark){
  .loading-screen{
    background: radial-gradient(90vmax 90vmax at 50% 50%, rgba(13,10,20,0.92), rgba(13,10,20,0.99));
  }
}

/* Larger starburst and farther travel */
.stardust-burst{
  --burst: 6; /* multiply travel distance of particles */
  width: min(80vmin, 720px);
  height: min(80vmin, 720px);
}

/* Beef up particles and glow; extend duration */
.dust{
  width: 6px;
  height: 6px;
  animation-duration: 1400ms; /* was 1000ms */
  box-shadow:
    0 0 10px rgba(255,255,255,0.95),
    0 0 22px rgba(169,139,255,0.45),
    0 0 40px rgba(246,167,217,0.35);
}
.dust.sm{
  width: 4px;
  height: 4px;
  animation-duration: 1200ms;
  box-shadow:
    0 0 8px rgba(255,255,255,0.90),
    0 0 18px rgba(169,139,255,0.38);
}

/* Multiply travel distance for dustOut */
@keyframes dustOut{
  0%   { transform: translate(-50%, -50%) scale(0.8); opacity: 0.95; }
  70%  { opacity: .5; }
  100% {
    transform:
      translate(
        calc(-50% + (var(--tx) * var(--burst, 1))),
        calc(-50% + (var(--ty) * var(--burst, 1)))
      )
      scale(1.1);
    opacity: 0;
  }
}

/* Respect reduced-motion preference */
@media (prefers-reduced-motion: reduce){
  .dust{
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }
}

/* ---------------------------------------------------------- */
/* Interaction polish                                          */
/* ---------------------------------------------------------- */

/* Remove iOS grey tap highlight in footer area */
#creditLink,
.app-footer,
.app-footer *{
  -webkit-tap-highlight-color: transparent;
}

/* Disable flip chip hover background (keeps it ultra-clean) */
.flip:focus .flip-inner,
.flip:hover .flip-inner,
.flip:active .flip-inner{
  background: transparent !important;
  box-shadow: none;
}

/* Ensure credit chip itself never paints a bg from other styles */
#creditLink .flip-inner{
  background: transparent !important;
}

/* Attribute hidden should always hide */
[hidden]{ display: none !important; }

/* Do not render card thumbnails if they are hidden or lack a usable src */
.note-card .note-thumb[hidden],
.note-card .note-thumb:not([src]),
.note-card .note-thumb[src=""]{
  display: none !important;
}

/* Hide the reader gallery entirely when there are no images */
#readerGallery:empty{ display: none !important; }
#mailTitle,
.note-title,
#readerTitle,
.diary-text,
.reader-body,
#mailBody,
.note-preview{
  font-family: 'Patrick Hand', 'Caveat', 'Manrope', system-ui, -apple-system, Segoe UI, Roboto, sans-serif !important;
}

/* Improve readability for long-form text */
.diary-text,
.reader-body,
#mailBody,
.note-preview{
  line-height: 1.7 !important;
  letter-spacing: 0.15px !important;
}